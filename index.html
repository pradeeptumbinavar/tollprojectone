<!DOCTYPE html>
<html>
    <body style="display: flex; flex-direction:column; justify-content:center; align-items:center; ">
        <button onclick="geoFence()">Start GeoFencing</button>
        <p>OUTPUT STATUS:</p>
        <div id="output" style="border-radius:4px; border: 2px solid black; padding:2px;"></div>
        &nbsp;
        <p>LOCATION CORDINATES:</p>
        <div id="location" style="border-radius:4px; border: 2px solid black; padding:2px;"></div>
        &nbsp; <!-- Add a div to display location -->
        
<script defer>
var watchID;
var geoLoc;
// Our boundary points
let lhsBoundary = [15.352708,75.081763]; // [latitude, longitude] for the left boundary point
let rhsBoundary = [15.352670,75.081829]; // [latitude, longitude] for the right boundary point
// Start monitoring location
function geoFence() {
    if (navigator.geolocation) {
        var options = { enableHighAccuracy: true };
        geoLoc = navigator.geolocation;
        watchID = geoLoc.watchPosition(showLocation, errorHandler, options);
        // Disable the button to prevent multiple clicks
        document.querySelector("button").disabled = true;
    }
}
// Showing Location
function showLocation(position) {
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;
    // Update location display
    document.getElementById('location').innerHTML = 'Latitude: ' + latitude + ', Longitude: ' + longitude;
    // Check if we crossed the boundary line
    if (isCrossingLine(lhsBoundary, rhsBoundary, latitude, longitude)) {
        document.getElementById('output').innerHTML = 'Crossed the boundary line!';
    }                   
}
// Function to check if the user's location is crossing the line defined by two points
function isCrossingLine(point1, point2, lat, long) {
    // Check if latitude is within the range of the two points' latitudes
    var minLat = Math.min(point1[0], point2[0]);
    var maxLat = Math.max(point1[0], point2[0]);
    var withinLatRange = (lat >= minLat && lat <= maxLat);

    // Check if longitude is within the range of the two points' longitudes
    var minLong = Math.min(point1[1], point2[1]);
    var maxLong = Math.max(point1[1], point2[1]);
    var withinLongRange = (long >= minLong && long <= maxLong);

    // Return true if both latitude and longitude are within the range
    return (withinLatRange && withinLongRange);
}
// Handling errors
function errorHandler(err) {
    if (err.code == 1) {
        alert("Error: Access is denied!");
    } else if (err.code == 2) {
        alert("Error: Position is unavailable!");
    }
}
</script>
</body>
</html>
